{% extends "base.html" %}

{% block title %}Interactive Activity | {{ technique|capitalize }} Technique{% endblock %}

{% block content %}
<div class="course-container">
    <h2>{{ technique|capitalize }} Technique</h2>
    
    <div class="progress-container">
        <div class="progress">
            <div class="progress-bar" role="progressbar" style="width: {{ (page_num + 1) / total_pages * 100 }}%" aria-valuenow="{{ (page_num + 1) / total_pages * 100 }}" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div class="progress-text">
            <span>
                {% if (page_num + 1) / total_pages < 0.25 %}
                Just getting started! üå±
                {% elif (page_num + 1) / total_pages < 0.5 %}
                You're making progress! üåø
                {% elif (page_num + 1) / total_pages < 0.75 %}
                Keep going, you're doing great! üåº
                {% elif (page_num + 1) / total_pages < 1 %}
                Almost there! üå∏
                {% else %}
                Course complete! üéâ
                {% endif %}
            </span>
            <span>Step {{ page_num + 1 }} of {{ total_pages }}</span>
        </div>
    </div>
    
    <div class="course-content">
        <div class="teacher-bubble interactive">
            <div class="teacher-icon">üë©‚Äçüè´</div>
            <div class="teacher-content">
                <h3>Interactive Activity</h3>
                <p>{{ page.instructions }}</p>
            </div>
        </div>
        
        <div class="interactive-activity" data-activity-type="{{ page.activityType }}" data-technique="{{ technique }}" data-activity-num="{{ page_num }}">
            <!-- Render different activities based on activityType -->
            {% if page.activityType == 'drag-and-drop' %}
                <div class="drag-and-drop-activity">
                    <h4 class="activity-instructions">Drag and arrange these items:</h4>
                    <div class="drag-items">
                        {% for item in page.items %}
                        <div class="drag-item" data-item="{{ loop.index0 }}">{{ item }}</div>
                        {% endfor %}
                    </div>
                    
                    <div class="target-zones">
                        {% for zone in page.targetZones %}
                        <div class="target-zone" data-zone="{{ loop.index0 }}">
                            <p>{{ zone }}</p>
                            <div class="placed-items"></div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                
            {% elif page.activityType == 'hotspot' %}
                <div class="hotspot-activity">
                    <h4 class="activity-instructions">Click on the areas in the image:</h4>
                    <div class="placeholder-container">
                        <div class="placeholder-text">
                            <span class="flower-emoji">üñºÔ∏è</span>
                            <p>Image with hotspots</p>
                        </div>
                        
                        {% for hotspot in page.hotspots %}
                        <div class="hotspot-spot" 
                             data-spot-id="{{ loop.index0 }}" 
                             data-feedback="{{ hotspot.feedback }}" 
                             style="left: {{ hotspot.x }}%; top: {{ hotspot.y }}%; width: {{ hotspot.radius * 2 }}px; height: {{ hotspot.radius * 2 }}px;">
                        </div>
                        {% endfor %}
                    </div>
                </div>
                
            {% elif page.activityType == 'color-picker' %}
                <div class="color-picker-activity">
                    <h4 class="activity-instructions">Select complementary colors:</h4>
                    <div class="color-options">
                        {% for color in page.colorOptions %}
                        <div class="color-option" data-color="{{ color }}" style="background-color: {{ color }};"></div>
                        {% endfor %}
                    </div>
                </div>
                
            {% elif page.activityType == 'matching' %}
                <div class="matching-activity">
                    <h4 class="activity-instructions">Match each item with its correct pair:</h4>
                    <div class="matching-container">
                        <div class="matching-items">
                            {% for pair in page.pairs %}
                            <div class="matching-item" data-item="{{ loop.index0 }}">{{ pair.item }}</div>
                            {% endfor %}
                        </div>
                        <div class="matching-matches">
                            {% for pair in page.pairs %}
                            <div class="matching-match" data-match="{{ loop.index0 }}">{{ pair.match }}</div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                
            {% elif page.activityType == 'sorting' %}
                <div class="sorting-activity">
                    <h4 class="activity-instructions">Sort these items in correct order:</h4>
                    <div class="sorting-items">
                        {% for item in page.items %}
                        <div class="sorting-item" data-item="{{ loop.index0 }}">{{ item }}</div>
                        {% endfor %}
                    </div>
                    <div class="sorted-items"></div>
                </div>
                
            {% elif page.activityType == 'slider' %}
                <div class="slider-activity">
                    <h4 class="activity-instructions">{{ page.sliderLabel }}</h4>
                    <div class="slider-container">
                        <div class="slider-labels">
                            <span>{{ page.minLabel }}</span>
                            <span>{{ page.maxLabel }}</span>
                        </div>
                        <input type="range" class="slider-input" min="0" max="100" value="50">
                        <div class="slider-visualization">
                            <div class="slider-position" style="width: 50%;"></div>
                        </div>
                    </div>
                </div>
                
            {% elif page.activityType == 'texture-palette' %}
                <div class="texture-palette-activity">
                    <h4 class="activity-instructions">Select complementary textures:</h4>
                    <div class="foliage-options" data-max-selections="{{ page.maxSelections }}">
                        {% for option in page.foliageOptions %}
                        <div class="foliage-option" data-texture="{{ loop.index0 }}">
                            <h4>{{ option.name }}</h4>
                            <p>{{ option.texture }}</p>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="selection-counter">0/{{ page.maxSelections }} selected</div>
                </div>
                
            {% elif page.activityType == 'before-after' %}
                <div class="before-after-activity">
                    <h4 class="activity-instructions">Slide to compare:</h4>
                    <div class="before-after-placeholder">
                        <div class="before-side" style="width: 50%;">
                            <span class="flower-emoji">üå±</span>
                            <p>Before</p>
                        </div>
                        <div class="after-side">
                            <span class="flower-emoji">üå∏</span>
                            <p>After</p>
                        </div>
                    </div>
                    <input type="range" class="before-after-input" min="0" max="100" value="50">
                </div>
                
            {% elif page.activityType == 'spotlight' %}
                <div class="spotlight-activity">
                    <h4 class="activity-instructions">Move your mouse over the image to explore:</h4>
                    <div class="spotlight-container">
                        <div class="spotlight-placeholder">
                            <span class="flower-emoji">üîç</span>
                            <p>Move your mouse to explore</p>
                        </div>
                        <div class="spotlight" style="width: {{ page.spotlightRadius * 2 }}px; height: {{ page.spotlightRadius * 2 }}px;"></div>
                        
                        {% for point in page.infoPoints %}
                        <div class="info-point" style="left: {{ point.x }}%; top: {{ point.y }}%;" data-text="{{ point.text }}"></div>
                        {% endfor %}
                    </div>
                    <div class="info-tooltip"></div>
                </div>
                
            {% elif page.activityType == 'draw-line' %}
                <div class="draw-line-activity">
                    <h4 class="activity-instructions">Select a line orientation:</h4>
                    <div class="line-options">
                        {% for lineType in page.lineOptions %}
                        <div class="line-option" data-line-type="{{ lineType }}">{{ lineType|capitalize }}</div>
                        {% endfor %}
                    </div>
                    <div class="drawing-area placeholder-container">
                        <div class="placeholder-text">
                            <span class="flower-emoji">üìè</span>
                            <p>Select a line type above to draw</p>
                        </div>
                    </div>
                </div>
            {% endif %}
            
            <div class="activity-feedback"></div>
        </div>
    </div>
    
    <div class="navigation">
        {% if page_num > 0 %}
        <a href="{{ url_for('learn', page_num=page_num-1) }}" class="nav-btn">‚Üê Previous</a>
        {% else %}
        <a href="{{ url_for('learn', page_num=-1) }}" class="nav-btn">‚Üê Introduction</a>
        {% endif %}
        
        <div class="page-indicators">
            {% for i in range(total_pages) %}
            <span class="page-dot {% if i == page_num %}active{% endif %}"></span>
            {% endfor %}
        </div>
        
        {% if page_num < total_pages - 1 %}
        <a href="{{ url_for('learn', page_num=page_num+1) }}" class="nav-btn">Next ‚Üí</a>
        {% else %}
        <a href="{{ url_for('complete_course') }}" class="nav-btn">Complete! üéâ</a>
        {% endif %}
    </div>
</div>
{% endblock %} 